#!/usr/bin/env python3

def add_archsh_path():
    from os.path import normpath, join, exists, dirname, abspath, realpath
    libdir = normpath(join(dirname(realpath(__file__)), ".."))
    if exists(join(libdir, "archsh")):
        sys.path.insert(0, libdir)
    # sys.argv[0] = os.path.abspath(__file__)

def main(argv):
    import argparse as ap

    from archsh import shell

    parser = ap.ArgumentParser("archsh")
    parser.add_argument("archive", help="archive file name")

    args = parser.parse_args(argv[1:])

    s = shell(args.archive)
    s.main()

if __name__ == "__main__":
    import sys

    add_archsh_path()
    main(sys.argv)
